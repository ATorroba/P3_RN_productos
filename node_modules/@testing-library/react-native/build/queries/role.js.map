{"version":3,"file":"role.js","names":["matchAccessibleNameIfNeeded","node","name","queryAllByText","queryAllByLabelText","getQueriesForElement","length","queryAllByRole","instance","queryAllByRoleFn","role","options","findAll","type","matchStringProp","props","accessibilityRole","getMultipleError","String","getMissingError","getBy","getAllBy","queryBy","queryAllBy","findBy","findAllBy","makeQueries","bindByRoleQueries","getByRole","getAllByRole","queryByRole","findByRole","findAllByRole"],"sources":["../../src/queries/role.ts"],"sourcesContent":["import type { ReactTestInstance } from 'react-test-renderer';\nimport { matchStringProp } from '../helpers/matchers/matchStringProp';\nimport { TextMatch } from '../matches';\nimport { getQueriesForElement } from '../within';\nimport { makeQueries } from './makeQueries';\nimport type {\n  FindAllByQuery,\n  FindByQuery,\n  GetAllByQuery,\n  GetByQuery,\n  QueryAllByQuery,\n  QueryByQuery,\n} from './makeQueries';\n\ntype ByRoleOptions = {\n  name?: TextMatch;\n};\n\nconst matchAccessibleNameIfNeeded = (\n  node: ReactTestInstance,\n  name?: TextMatch\n) => {\n  if (name == null) return true;\n\n  const { queryAllByText, queryAllByLabelText } = getQueriesForElement(node);\n  return (\n    queryAllByText(name).length > 0 || queryAllByLabelText(name).length > 0\n  );\n};\n\nconst queryAllByRole = (\n  instance: ReactTestInstance\n): ((role: TextMatch, options?: ByRoleOptions) => Array<ReactTestInstance>) =>\n  function queryAllByRoleFn(role, options) {\n    return instance.findAll(\n      (node) =>\n        typeof node.type === 'string' &&\n        matchStringProp(node.props.accessibilityRole, role) &&\n        matchAccessibleNameIfNeeded(node, options?.name)\n    );\n  };\n\nconst getMultipleError = (role: TextMatch) =>\n  `Found multiple elements with accessibilityRole: ${String(role)} `;\nconst getMissingError = (role: TextMatch) =>\n  `Unable to find an element with accessibilityRole: ${String(role)}`;\n\nconst { getBy, getAllBy, queryBy, queryAllBy, findBy, findAllBy } = makeQueries(\n  queryAllByRole,\n  getMissingError,\n  getMultipleError\n);\n\nexport type ByRoleQueries = {\n  getByRole: GetByQuery<TextMatch, ByRoleOptions>;\n  getAllByRole: GetAllByQuery<TextMatch, ByRoleOptions>;\n  queryByRole: QueryByQuery<TextMatch, ByRoleOptions>;\n  queryAllByRole: QueryAllByQuery<TextMatch, ByRoleOptions>;\n  findByRole: FindByQuery<TextMatch, ByRoleOptions>;\n  findAllByRole: FindAllByQuery<TextMatch, ByRoleOptions>;\n};\n\nexport const bindByRoleQueries = (\n  instance: ReactTestInstance\n): ByRoleQueries => ({\n  getByRole: getBy(instance),\n  getAllByRole: getAllBy(instance),\n  queryByRole: queryBy(instance),\n  queryAllByRole: queryAllBy(instance),\n  findByRole: findBy(instance),\n  findAllByRole: findAllBy(instance),\n});\n"],"mappings":";;;;;;;AACA;;AAEA;;AACA;;AAcA,MAAMA,2BAA2B,GAAG,CAClCC,IADkC,EAElCC,IAFkC,KAG/B;EACH,IAAIA,IAAI,IAAI,IAAZ,EAAkB,OAAO,IAAP;EAElB,MAAM;IAAEC,cAAF;IAAkBC;EAAlB,IAA0C,IAAAC,4BAAA,EAAqBJ,IAArB,CAAhD;EACA,OACEE,cAAc,CAACD,IAAD,CAAd,CAAqBI,MAArB,GAA8B,CAA9B,IAAmCF,mBAAmB,CAACF,IAAD,CAAnB,CAA0BI,MAA1B,GAAmC,CADxE;AAGD,CAVD;;AAYA,MAAMC,cAAc,GAClBC,QADqB,IAGrB,SAASC,gBAAT,CAA0BC,IAA1B,EAAgCC,OAAhC,EAAyC;EACvC,OAAOH,QAAQ,CAACI,OAAT,CACJX,IAAD,IACE,OAAOA,IAAI,CAACY,IAAZ,KAAqB,QAArB,IACA,IAAAC,gCAAA,EAAgBb,IAAI,CAACc,KAAL,CAAWC,iBAA3B,EAA8CN,IAA9C,CADA,IAEAV,2BAA2B,CAACC,IAAD,EAAOU,OAAO,EAAET,IAAhB,CAJxB,CAAP;AAMD,CAVH;;AAYA,MAAMe,gBAAgB,GAAIP,IAAD,IACtB,mDAAkDQ,MAAM,CAACR,IAAD,CAAO,GADlE;;AAEA,MAAMS,eAAe,GAAIT,IAAD,IACrB,qDAAoDQ,MAAM,CAACR,IAAD,CAAO,EADpE;;AAGA,MAAM;EAAEU,KAAF;EAASC,QAAT;EAAmBC,OAAnB;EAA4BC,UAA5B;EAAwCC,MAAxC;EAAgDC;AAAhD,IAA8D,IAAAC,wBAAA,EAClEnB,cADkE,EAElEY,eAFkE,EAGlEF,gBAHkE,CAApE;;AAeO,MAAMU,iBAAiB,GAC5BnB,QAD+B,KAEZ;EACnBoB,SAAS,EAAER,KAAK,CAACZ,QAAD,CADG;EAEnBqB,YAAY,EAAER,QAAQ,CAACb,QAAD,CAFH;EAGnBsB,WAAW,EAAER,OAAO,CAACd,QAAD,CAHD;EAInBD,cAAc,EAAEgB,UAAU,CAACf,QAAD,CAJP;EAKnBuB,UAAU,EAAEP,MAAM,CAAChB,QAAD,CALC;EAMnBwB,aAAa,EAAEP,SAAS,CAACjB,QAAD;AANL,CAFY,CAA1B"}